# 『CodeIgniter徹底入門』に対するノート

## 第2部 リファレンス

### Chapter 11 基本的なライブラリ

#### 11.1 ベンチマーククラス

11.1.1 使い方

11.1.2 プロファイラ用の観測

11.1.3 ビューでの表示項目

①総実行時間の表示

②メモリ使用量の表示

#### 11.2 設定クラス

11.2.1 メイン設定ファイル

設定値の取得

11.2.2 独自の設定ファイル

独自設定ファイルの読み込み

11.2.3 設定項目名の衝突を避ける

11.2.4 設定の書き込み

11.2.5 ヘルパーメソッド

サイトURL の取得

#### 11.3 入力およびセキュリティクラス

11.3.1 セキュリティフィルタリング

11.3.2 XSSフィルタリング

***
【Note】P.372

global_xss_filteringはCodeIgniter 3.0で廃止予定となりました。また、XSSフィルタリングは出力に対して行うべきで、入力時にフィルタすべきでないことがユーザガイドに明記されました。
http://www.codeigniter.com/user_guide/libraries/input.html#xss-filtering
***

11.3.3 POST、COOKIEあるいはSERVERデータの取得

POSTデータの取得

クッキーデータの取得

SERVERデータの取得

ユーザーのIPアドレスの取得

文字列がIPアドレスかどうかの確認

ユーザーエージェントの取得

#### 11.4 ローダークラス

11.4.1 ビューファイルのロード

11.4.2 ビューの動的データのロード

11.4.3 ファイルのロード

11.4.4 データベースクラスのロード

11.4.5 Scaffoldingのロード

11.4.6 ヘルパーファイルのロード

11.4.7 プラグインファイルのロード

11.4.8 モデルのロード

#### 11.5 言語クラス

11.5.1 言語ファイルの保存場所

11.5.2 言語ファイルの作成

11.5.3 言語ファイルの利用

言語ファイルのロード

テキストの取得

言語ファイルの自動読み込み

#### 11.6 出力クラス

11.6.1 最終出力の設定

11.6.2 最終出力の取得

11.6.3 HTTP応答ヘッダの設定

11.6.4 プロファイラの設定

#### 11.7 URIクラス

11.7.1 URIセグメントの取得

任意のURIセグメントの取得

スラッシュ付きURIセグメントの取得

キー／値の連想配列の取得

文字列として取得

URIセグメント数の取得

11.7.2 URI文字列の生成

11.7.3 URIルーティング後の値を扱う

#### 11.8 データベースクラス

11.8.1 データベースの設定

複数のデータベース接続情報の設定

Active Recordクラスを使用しない場合

11.8.2 データベースへの接続

自動接続

手動接続

複数のデータベースへの接続

11.8.3 基本的な使い方（初期化、データ取得／登録／更新）

データベースクラスを初期化する

データベースからデータを検索／取得する

データの登録／更新を行なう

11.8.4 クエリの実行

通常のクエリ

シンプルクエリ

クエリのエスケープ処理

クエリのバインディング

11.8.5 クエリの結果

複数行の結果を取り出す

1行の結果を取り出す

11.8.6 結果ヘルパーメソッド

検索結果の行数の取得

検索結果のフィールド数の取得

検索結果メモリの解放

11.8.7 クエリヘルパーメソッド

挿入IDの取得

処理された行数の取得

テーブルの行数の取得

データベースの種類の取得

データベースのバージョンの取得

最後に実行されたクエリの取得

簡単な登録処理

簡単な更新処理

11.8.8 トランザクション

トランザクションの実行

エラーの制御

トランザクションの無効化

テストモード

トランザクションを手動で管理する

11.8.9 メタデータの取得

テーブルのメタデータ

フィールドのメタデータ

PHPネイティブ関数の呼び出し

データベース接続ID／結果IDの取得

11.8.10 データベースキャッシュクラス

キャッシュの仕組み

利用できなくなるメソッド／プロパティ

キャッシュの有効化

キャッシュを有効／無効にするメソッド

キャッシュの削除

#### 11.9 データベースフォージクラス

11.9.1 データベースの作成／削除

11.9.2 テーブルの作成／削除

テーブルの定義

キーの追加

テーブルの作成

テーブルの削除

11.9.3 テーブルの変更

フィールドの追加

フィールドの削除

フィールドの変更

#### 11.10 データベースユーティリティクラス

11.10.1 データベースのリストアップ

11.10.2 データベースの最適化／修復

テーブルの最適化

テーブルの修復

すべてのテーブルの最適化

11.10.3 検索結果からのCSV/XMLの生成

CSVの生成

XMLの生成

11.10.4 データベースのバックアップ

#### 11.11 Active Recordクラス

***
【Note】

CodeIgniter 3.0からActive RecordはQuery Builderに名称変更されました。
***

11.11.1 データの検索

データ検索の実行

SELECT句の指定方法

FROM句の指定方法

JOIN句の指定方法

WHERE句の指定方法

LIKE句の指定方法

GROUP句の指定方法

DISTINCT句の指定方法

HAVING句の指定方法

ORDER句の指定方法

LIMIT句の指定方法

結果の行数の取得

データを検索／取得するサンプルプログラム

11.11.2 データの登録

登録／更新データの設定

11.11.3 データの更新

11.11.4 データの削除

テーブル全体のデータの削除

11.11.5 メソッドの連結

11.11.6 Active Recordキャッシング

キャッシングの開始

キャッシングの停止

キャッシングのクリア

Active Recordキャッシングのサンプルプログラム

11.12 セッションクラス

11.12.1 セッションデータ

11.12.2 使い方

セッションデータの取得

セッションデータの追加

セッションデータの削除

セッションの破棄

11.12.3 フラッシュデータ

フラッシュデータの追加

フラッシュデータの読み取り

フラッシュデータの削除

11.12.4 データベースの利用

11.12.5 データの暗号化

11.12.6 セッションの設定項目

### Chapter 12 その他のライブラリ

12.1 カレンダークラス

12.1.1 カレンダークラスの初期化

12.1.2 カレンダーの表示

翌月、前月へのリンクの表示

12.1.3 テンプレートの変更

#### 12.2 Emailクラス

12.2.1 Emailクラスの初期化

①手動での設定

②設定ファイルでの設定

12.2.2 メソッドリファレンス

alt_message()メソッド

attach()メソッド

bcc()メソッド

cc()メソッド

clear()メソッド

from()メソッド

message()メソッド

print_debugger()メソッド

reply_to()メソッド

send()メソッド

subject()メソッド

to()メソッド

12.2.3 Emailの送信

12.2.4 ワードラップ機能の抑制

#### 12.3 暗号化クラス

12.3.1 暗号化キーの設定

12.3.2 暗号化と復号化

12.3.3 暗号化方式の指定

12.3.4 SHA1での暗号化

#### 12.4 ファイルアップロードクラス

12.4.1 アップロードクラスの初期化

12.4.2 メソッドリファレンス

data()メソッド

display_errors()メソッド

do_upload()メソッド

12.4.3 アップロードフォームの作成

#### 12.5 FTPクラス

12.5.1 FTPサーバーの接続設定

①手動での設定

②設定ファイルでの設定

12.5.2 メソッドリファレンス

chmod()メソッド

close()メソッド

delete_dir()メソッド

delete_file()メソッド

list_files()メソッド

mirror()メソッド

mkdir()メソッド

move()メソッド

rename()メソッド

upload()メソッド

#### 12.6 HTMLテーブルクラス

12.6.1 テーブルデータの指定方法

テーブルにキャプションを付ける

テーブルの見出しを指定する

行を追加する

一次元配列を多次元配列に変換

セルが空の場合のデフォルト値の設定

ヘッダと行データのクリア

12.6.2 テーブルを生成する

テーブルのテンプレートを変更する

12.6.3 配列からHTMLテーブルを生成

12.6.4 データベースの結果セットからHTMLテーブルを生成

#### 12.7 画像操作クラス

12.7.1 画像操作クラスの初期化

①手動での設定

②設定ファイルでの設定

12.7.2 画像のリサイズ

サムネイルの作成

コピーの作成

元画像のリサイズ

12.7.3 画像の切り取り

12.7.4 画像の回転

12.7.5 画像の合成

画像合成の設定項目

画像にテキストを合成

12.7.6 画像のループ処理

#### 12.8 ページネーションクラス

12.8.1 ページネーションクラスの設定

①手動での設定

②設定ファイルでの設定

12.8.2 リンクの作成

#### 12.9 トラックバッククラス

12.9.1 トラックバックの送信

12.9.2 トラックバックの受信

#### 12.10 テンプレートパーサクラス

12.10.1 テンプレートの使い方

擬似変数

繰り返し処理

ビューファイルへのデータの渡し方

#### 12.11 ユニットテストクラス

12.11.1 テストの実行

Strictモード

12.11.2 レポートの生成

1つのテスト結果の表示

テスト結果をすべて表示

テスト結果のテキストデータを出力

12.11.3 ユニットテストの無効化

12.11.4 テンプレートの変更

#### 12.12 ユーザエージェントクラス

12.12.1 ユーザエージェントの定義

12.12.2 メソッドリファレンス

accept_charset()メソッド

accept_lang()メソッド

agent_string()メソッド

browser()メソッド

is_browser()メソッド

is_mobile()メソッド

is_referral()メソッド

is_robot()メソッド

mobile()メソッド

platform()メソッド

referrer()メソッド

robot()メソッド

version()メソッド

#### 12.13 バリデーション（検証）クラス

12.13.1 検証ルール

12.13.2 ユーザー定義の検証ルール

12.13.3 整形ルール

12.13.4 検証の実行

12.13.5 エラー表示

エラー表示でのフィールド名の指定

エラーメッセージの変更

エラーメッセージの全表示

エラーメッセージの個別表示

エラーメッセージの前後のタグの変更

12.13.6 メニュー／ラジオボタン／チェックボックスの選択状態維持

メニュー

チェックボックス

ラジオボタン

#### 12.14 XML-RPCクラス

12.14.1 XML-RPCクライアント

メソッドリファレンス

XML-RPCクライアントの作成

12.14.2 XML-RPCサーバ

メソッドリファレンス

XML-RPCサーバの作成

#### 12.15 ZIP圧縮クラス

12.15.1 ZIPアーカイブへファイルを追加する

空のディレクトリを追加する

サーバ上のファイルを追加する

サーバ上のディレクトリを追加する

12.15.2 ZIPアーカイブをファイルへ書き込む

12.15.3 ZIPアーカイブを直接ダウンロードさせる

12.15.4 その他のメソッド

### Chapter 13 ヘルパー

#### 13.1 配列ヘルパ

13.1.1 element()メソッド

13.1.2 random_element()メソッド

#### 13.2 クッキーヘルパー

13.2.1 set_cookie()メソッド

13.2.2 get_cookie()メソッド

13.2.3 delete_cookie()メソッド

#### 13.3 日付ヘルパー

13.3.1 now()メソッド

13.3.2 mdate()メソッド

13.3.3 standard_date()メソッド

13.3.4 local_to_gmt()メソッド

13.3.5 gmt_to_local()メソッド

13.3.6 mysql_to_unix()メソッド

13.3.7 unix_to_human()メソッド

13.3.8 human_to_unix()メソッド

13.3.9 timespan()メソッド

13.3.10 days_in_month()メソッド

13.3.11 1timezone_menu()メソッド

13.3.12 タイムゾーン

#### 13.4 ディレクトリヘルパー

13.4.1 directory_map()メソッド

#### 13.5 ダウンロードヘルパー

13.5.1 force_download()メソッド

#### 13.6 Emailヘルパー

13.6.1 valid_email()メソッド

#### 13.7 ファイルヘルパー

13.7.1 read_file()メソッド

13.7.2 write_file()メソッド

13.7.3 delete_files()メソッド

13.7.4 get_filenames()メソッド

#### 13.8 Formヘルパー

13.8.1 form_open()メソッド、form_close()メソッド

13.8.2 form_open_multipart()メソッド

13.8.3 form_hidden()メソッド

13.8.4 form_input()メソッド

13.8.5 form_password()メソッド

13.8.6 form_upload()メソッド

13.8.7 form_textarea()メソッド

13.8.8 form_dropdown()メソッド

13.8.9 form_fieldset()メソッド、form_fieldset_close()メソッド

13.8.10 form_checkbox()メソッド

13.8.11 form_radio()メソッド

13.8.12 form_submit()メソッド

13.8.13 form_label()メソッド

13.8.14 form_reset()メソッド

13.8.15 form_prep()メソッド

#### 13.9 HTMLヘルパー

13.9.1 heading()メソッド

13.9.2 img()メソッド

13.9.3 link_tag()メソッド

13.9.4 ol()メソッド、ul()メソッド

13.9.5 nbs()メソッド

13.9.6 br()メソッド

#### 13.10 パスヘルパー

13.10.1 set_realpath()メソッド

#### 13.11 セキュリティヘルパー

13.11.1 xss_clean()メソッド

13.11.2 dohash()メソッド

13.11.3 strip_image_tags()メソッド

13.11.4 encode_php_tags()メソッド

#### 13.12 スマイリーヘルパー

13.12.1 get_clickable_smileys()メソッド

13.12.2 js_insert_smiley()メソッド

13.12.3 parse_smileys()メソッド

13.12.4 スマイリーヘルパーの利用例

#### 13.13 文字列ヘルパー

13.13.1 random_string()メソッド

13.13.2 alternator()メソッド

13.13.3 repeater()メソッド

13.13.4 reduce_double_slashes()メソッド

13.13.5 trim_slashes()メソッド

13.13.6 reduce_multiples()メソッド

13.13.7 quotes_to_entities()メソッド

13.13.8 strip_quotes()メソッド

#### 13.14 テキストヘルパー

13.14.1 ascii_to_entities()メソッド

13.14.2 entities_to_ascii()メソッド

13.14.3 word_censor()メソッド

13.14.4 highlight_code()メソッド

13.14.5 highlight_phrase()メソッド

13.14.6 word_limiter()メソッド

13.14.7 word_worp()メソッド

13.14.8 character_limiter()メソッド

#### 13.15 タイポグラフィーヘルパー

13.15.1 auto_typography()メソッド

13.15.2 nl2br_except_pre()メソッド

#### 13.16 URL ヘルパー

13.16.1 site_url()メソッド

13.16.2 base_url()メソッド

13.16.3 index_page()メソッド

13.16.4 anchor()メソッド

13.16.5 anchor_popup()メソッド

13.16.6 mailto()メソッド

13.16.7 safe_mailto()メソッド

13.16.8 auto_link()メソッド

13.16.9 url_title()メソッド

13.16.10 prep_url()メソッド

13.16.11 redirect()メソッド

#### 13.17 XMLヘルパー

13.17.1 xml_convert()メソッド
